<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ace="http://www.icefaces.org/icefaces/components"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:icecore="http://www.icefaces.org/icefaces/core"
                xmlns:ice="http://www.icesoft.com/icefaces/component"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions">

    <ice:panelGroup rendered="#{reporteProyectoMB.listaAcumuladosProductos != null or reporteProyectoMB.listaAcumuladosPresupuesto != null}">
        <ice:panelGroup styleClass="anioProducto">
            <ice:commandLink action="#{reporteProyectoMB.retrocederAnio()}" 
                             rendered="#{reporteProyectoMB.contieneAnioMenor()}">
                <ice:graphicImage value="../img/atrasar-fase.png" />
            </ice:commandLink>
            <ice:outputText value="#{reporteProyectoMB.anio}" title="#{labels.reporte_proy_anio_desplegado}"/>
            <ice:commandLink action="#{reporteProyectoMB.avanzarAnio()}"
                             rendered="#{reporteProyectoMB.contieneAnioMayor()}">
                <ice:graphicImage value="../img/adelantar-fase.png" />
            </ice:commandLink>
        </ice:panelGroup>

        <!-- Productos -->
        <ice:panelGroup rendered="false">
            <ice:panelGroup styleClass="subtitulo">
                <ice:outputText value="#{labels.reporte_titulo_productos}"/>
            </ice:panelGroup>

            <ace:dataTable id="tblAcumuladosProd" 
                           value="#{reporteProyectoMB.listaAcumuladosProductos}" 
                           var="acu" 
                           styleClass="table-responsive tablaAcumulados">

                <ui:include src="./reporteAcumuladosFragmentoTablaColums.xhtml" />

            </ace:dataTable>
            <ice:outputText value="#{reporteProyectoMB.semaforosProductos()}" escape="false" />
        </ice:panelGroup>

        <!-- Presupuesto -->
        <ice:panelGroup >
            <ice:panelGroup styleClass="subtitulo reporteSubPresupuesto margen-sup">
                <ice:outputText value="#{labels.reporte_titulo_presupuesto}"/>
            </ice:panelGroup>
            <ice:panelGroup styleClass="alinearDerecha">
                <c:set var="tipoPre" value="#{reporteProyectoMB.tipoPre}" />
                <ice:commandLink action="#{reporteProyectoMB.recargarAcumulados()}">
                    <ice:outputText value="#{tipoPre == 1 ? labels.reporte_proy_pre_por_mon : labels.reporte_proy_pre_por_adq}" />
                </ice:commandLink>
            </ice:panelGroup>
            <ace:dataTable id="tblAcumuladosPre" 
                           value="#{reporteProyectoMB.listaAcumuladosPresupuesto}" 
                           var="acu" 
                           styleClass="table-responsive tablaAcumulados">

                <ui:include src="./reporteAcumuladosFragmentoTablaColums.xhtml" />

            </ace:dataTable>
            <ice:outputText value="#{reporteProyectoMB.semaforosPresupuesto()}" escape="false" />
        </ice:panelGroup>
    </ice:panelGroup>
</ui:composition>