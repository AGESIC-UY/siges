<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ace="http://www.icefaces.org/icefaces/components"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:icecore="http://www.icefaces.org/icefaces/core"
                xmlns:ice="http://www.icesoft.com/icefaces/component">

    <ice:panelGroup id="formRegistroHoras"
                    styleClass="recuadro margen-inf filtroProyecto"
                    rendered="#{inicioMB.organismo != null}">
        <ice:outputText value="#{labels.registroHoras_registrar}" styleClass="subtitulo"/>

        <ice:form id="frmRegistroHoras">
            <ice:panelGroup id="registroHoras" styleClass="col-sm-12">

                <ice:panelGrid columns="4" styleClass="formulario">
                    <ice:outputLabel id="z1" value="#{labels.registroHoras_proyecto}:" />
                    <ice:selectOneMenu id="comboProyecto" label="#{labels.registroHoras_proyecto}"
                                       value="#{registroHorasMB.registroHoras.rhProyectoFk.proyPk}" valueChangeListener="#{registroHorasMB.cambiarProyecto}" partialSubmit="true">
                        <f:selectItems value="#{registroHorasMB.listaProyectos}" var="proy" itemLabel="#{proy.proyPkNombre}" itemValue="#{proy.proyPk}"/>
                    </ice:selectOneMenu>

                    <ice:outputLabel value="#{labels.registroHoras_entregable}:" />
                    <ice:selectOneMenu id="comboEntregable" value="#{registroHorasMB.registroHoras.rhEntregableFk.entPk}">
                        <f:selectItems value="#{registroHorasMB.listaEntregables}" var="ent" itemLabel="#{ent.entNombre}" itemValue="#{ent.entPk}"/>
                    </ice:selectOneMenu>

                    <ice:outputLabel value="#{labels.registroHoras_fecha}:" />
                    <ace:dateTimeEntry value="#{registroHorasMB.registroHoras.rhFecha}"
                                       pattern="#{inicioMB.calendarPattern}" renderAsPopup="true" 
                                       timeZone="#{inicioMB.calendarTimeZone}" styleClass="hasDatepicker"/>

                    <ice:outputLabel value="#{labels.registroHoras_horas}:" />
                    <ice:inputText value="#{registroHorasMB.registroHoras.rhHoras}" styleClass="textoExtraCorto"
                                   converter="decimalFormatConverter" />

                    <ice:outputLabel value="#{labels.registroHoras_comentarios}:" />
                    <ice:inputTextarea value="#{registroHorasMB.registroHoras.rhComentario}" />

                    <ice:outputLabel value="#{labels.registroHoras_avance}:" />
                    <ice:selectOneMenu value="#{registroHorasMB.listaAvanceCombo.selected}">
                        <f:selectItems value="#{registroHorasMB.listaAvanceCombo.items}" />
                    </ice:selectOneMenu>

                </ice:panelGrid>
            </ice:panelGroup>

            <ice:panelGroup styleClass="panelBotones">
                <ace:messages id="registroFormMsg" />
                <ice:commandButton value="#{labels.registroHoras_registrar}" 
                                   action="#{registroHorasMB.registrarHoras()}" 
                                   styleClass="boton principal guardar"/>
            </ice:panelGroup>
        </ice:form>

        <ice:panelGroup styleClass="panelAcciones">

        </ice:panelGroup>

    </ice:panelGroup>
</ui:composition>